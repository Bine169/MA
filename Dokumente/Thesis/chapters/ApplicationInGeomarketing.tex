\section{Fundamentals of area segmentation}\label{Fundamentals}

Already for several decades people were doing researches in the field of area segmentation approaches. The first important model for area alignment was implemented by Hess et al. in 1965 whose solving a center-seeking political districting problem\cite{hess}. Since then a lot of additional researches were done to acquire a lot of more possible approaches and to improve existing ones. The origin which created the need for area segmentation deal especially with marketing aspects or with political distriction. Per example democratic countries need to create constituencies for every election that will be done. Therefore the state or federal state needs to be divided into smaller sub parts. Consequently an area segmentation approach is necessary. Besides that example area design approaches are often used for sales districting. Within these two special fields different researches exists. But it is recognizable that just a few approaches exist dealing with other aspects from the field of Geomarketing like Whitespot analyses. Nevertheless with reference to these examples it can be deduced that area segmentation is an aggregation of small geographic units into larger clusters in such a way that the latter are acceptable according to one ore more relevant planning criteria \cite{kalcsics, zoltner}. The smaller geographic areas are often called basic areas, the clustered units are mentioned as territories. Dependent on the context the relevant planning criteria may change. Per example if an economical context is used the number of costumers or the workload may be balanced. During the distriction several restrictions like compactness or contiguity needs to be satisfied. Such conditions will be explained in section \ref{criterias} ''\hyperref[criterias]{Planning criterias}'' in more detail. \\
Considering the researches of the last decades it is recognizable that the most of the acquired approaches are optimization models. Three types of models can be identified: (i) location-allocation approaches, (ii) set-partitioning approaches and (iii) heuristic methods. The location-allocation technic uses two steps to achieve a territory alignment. Therefore no centre points are given in the beginning which will be used for the creation of the clustered territories. Consequently in first step the centres of the territories need to be chosen. This stage is called location phase. Within the second step, the allocation phase, the small geographic units, called basic areas, are assigned to these centres. Both steps are iteratively performed until a satisfactory result is obtained \cite{kalcsics}. During the location-allocation stages it is tried to balance a relevant planning criteria. In some cases no centres need to be determined, if there already exist ones. Per example this is the case if a sales districting should be done where already salesman exist whose homes should be the centres of the territories. In such a case just the allocation phase needs to be done. The location-allocation approach was used by \citeauthor{hessstuart} \cite{hessstuart}, \citeauthor{zoltner} \cite{zoltner}, \citeauthor{george} \cite{george} and \citeauthor{schroeder} \cite{schroeder} per example.\\
Second there exist so called set-partitioning approaches. These methods are based on the process of generating cantons as a subdivision of all geographical units. These cantons are considered as aspirants to achieve a satisfying area segmentation. After this step is done a partition of the overall content should be done using such cantons to get a well balanced result \cite{schroeder}. Consequently two steps are necessary again as it was also done in the location-allocation approach. Both steps are performed consecutively or simultaneously as it was done in \citeauthor{garfinkel} \cite{garfinkel}, \citeauthor{nygreen} \cite{nygreen} and \citeauthor{mehrotra} \cite{mehrotra} per example. \\
As a third type of optimization models heuristic approaches exist. Contrary to the other two model types this one considers no processes of mathematical programming during the alignment. Such approaches were used by \citeauthor{mehrotra} \cite{mehrotra}, \citeauthor{deckro} \cite{deckro} and \citeauthor{bodin} \cite{bodin} per example.\\
All three types of models having advantages and disadvantages which make them more or less useful to implement them for Geomarketing strategies. These will be explained in more detail in section \ref{Selecting} ''\hyperref[Selecting]{Selecting approaches for implementation}''.


\subsection{Notions and criteria}\label{notions}
Each area segmentation process is a subject of several parameters that should be considered. In the case of political restriction one parameter may be a balanced distribution of the population in every created territory. Besides a balanced criteria there exist a lot of more parameters and conditions which can be borne in mind. In the following section the most typical parameters will be explained in more detail. However at first some important notions are mentioned which are correlated with every territory alignment approach.

\subsubsection{Basic areas}
Every area segmentation problem consists of a set V of areas to which the alignment should be done. These areas are geographical objects in the plane consequently there are maybe points (e.g. addresses of costumers), lines (e.g. street-sections) or polygons (e.g. districts). These areas are called \textit{basic areas}. Let $ B $ denotes a basic area then:

\[ \mathit{B_{1} \cup B_{2} \cup ... \cup B_{n}=V} \]

In the case of that thesis all implementations will be done to zip-code areas which will be represented by polygons. Further information can be found in section \ref{Implementation} ''\hyperref[Implementation]{Implementation of area segmentation approaches}''. Each basic area is linked with one or more quantifiable attributes which should be considered during the distriction. That attributes may be the number of households, the workload or the purchasing power.

\begin{figurevarSize}{Zip-code areas from Dresden as basic areas which may be used in an area segmentation process}{images/basicAreas.jpg}{0.8}\end{figurevarSize}

\subsubsection{Number of territories}
The number of territories defines how much higher ranking areas will be created using the basic areas. The number of territories will be given by the user in case of that thesis. Within some approaches like it was done in \citeauthor{kalcsics} \cite{kalcsics} the number of territories was handled as a planning parameter. Let $ B $ denotes the basic areas again and $ T $ denotes a territory then:

\[ \mathit{B_{1} \cup  ... \cup B_{n}=T_{1} \text{ and } B_{n+1} \cup ... \cup B_{m}=T_{2} \text{ etc.}}\]
\[ \mathit{T_{1} \cup  T_{2} \cup ... \cup T_{n}=V}\]

\subsubsection{Territory centers}
Usually a created territory is associated with a territory centre. If the area segmentation was done without centres which had exist already pre the 
calculation the centres are often located afterwards into the geographical centre of the territory. In other cases already centres exists. These will be the origin from that the alignment will start. Let $ T $ denotes the territories again and $ Z $ denotes a territory centre then

\[ \mathit{Z_{1} \in T_{1} \text{ , } Z_{2} \in T_{2} \text{ , } ... \text{ , } Z_{n} \in T_{n}}\]

\subsubsection{Unique assignment of basic areas}
A determined condition during the application of an area segmentation is the unique assignment of basic areas. This means that every basic areas is allocated to exactly one territory. Consequently no basic area exists which is not assigned to any territory. At the same time no territory exists which shares one basic area with another territory. Let $ B $ denotes a basic area and $ T $ denotes a territory consisting of several basic areas then:

\[ \mathit{B_{1} \cup  ... \cup B_{n}=T_{1} \text{ and } B_{n+1} \cup ... \cup B_{m}=T_{2} \text{ etc.} }\]
\[ \mathit{ T_{i} \cap T_{j}  =\emptyset, i \neq j}\]


\subsubsection{Additonal Planning criterias}\label{criterias}
Area segmentation processes are done to group small geographical units into larger clusters. Thereby often at least one planning criteria will be considered during the alignment. The planning criteria depends off the context for which the territory distriction will be done, consequently there exist several different criteria. The most common will be explained in that section.

\paragraph{Balance}\mbox{} \\

In the most of the cases a activity measure value should be balanced during the area segmentation process. Consequently the created cluster needs to be created in such a way that the sum of the activity measure of the containing basic areas is similar comparing to the other territories. Let $ B $ denotes the basic areas, then the total activity measure of one territory can be formulated as:

\[ \mathit{w(T_{i}) = \sum\nolimits  _{B \in T_{i}} w_{B}}\]

Considering results of area segmentation processes a perfectly balance of the activity measurement cannot be accomplished. This is caused by the discrete structure of the problem and the unique assignment assumption \cite{kalcsics}. The activity measure value depends on the context for which the planning distriction should be done. Either it may be economical origin like purchasing power and working load or it comes from demographic origin like the number of households and the number of population. Furthermore several activity measure values can be considered at the same time too. Instead of an activity measure it also may be possible to regard just the size of the area. Per example every territory should contain a similar number of zip-code areas.\\
Two examples of different balanced territories are shown in the following figure. The territories in Figure a) are more balanced considering an activity measure then the ones in Figure b). The area segmentation process is done to zip-code areas from Dresden and its neighbourhood. The used zip-code areas are more detailed as the common ones which contain 5 numbers, for more information about the used data see section \ref{Implementation} ''\hyperref[Implementation]{Implementation of area segmentation approaches}''. In this case the used activity measure is the number of households.

\begin{figureOwn}{Comparison of different results concerning balance of activity measure. a) Better balancing of activity measure. b) Poor balancing of activity measure }{images/balanced_notbalanced.jpg}\end{figureOwn}


\paragraph{Contiguity}\mbox{} \\

Often a constraint of the created territories is the contiguity of them. This means that every basic area that is contained in a territory is directly neighboured to one other basic area of the territory set. Therefore explicit neighbourhood information of the basic areas are required. For satisfying the condition neighbourhood graphs may be used in the algorithm. In the following figure coherent territories are confronted with not coherent territories.

\begin{figureOwn}{Comparison of different results concerning contiguity a) Coherent territories. b) No full coherence of the territories. }{images/coherent_notcoherent.jpg}\end{figureOwn} 

\paragraph{Compactness}\mbox{} \\

In economical and demographical context the resulting territories often need to be compact. In such cases compactness describes a ''fine'' and ''meaningful'' shape of the territory boundary, per example the shape ought to be round or quadratic. \citeauthor{young} defined a compact figure as ''homogeneous and in a limited space located figure which is not scattered over a spacious area'' \cite{young}. In case of an economic context a round shape of the territories is defined as compact to minimizes the access route starting from the territory centre per example. The compactness can be calculated with the help of different compactness measures like the compactness measure of Cox or the one of Harris \cite{koehler}. Additionally the weight of the euclidean distance can be used to define the compactness rate. In the following figure two examples are shown with different compactness of the territories.

\begin{figureOwn}{Comparison of different results concerning the compactness a) More compact territories. b) More scattered territories. }{images/compact_notcompact.jpg}\end{figureOwn} 


\subsection{Use cases}

\subsubsection{Political Districting}

Within determined time intervals elections are done within a country, federal state etc. to vote for persons who wants to be the representatives of it. Therefore the area have to be divided into sub parts, so called constituencies. Every constituencies nominees one candidate who will be elected directly into the parliament, this districting problem is called the ''one man-one vote'' problem.  A democratic election is based one the same weight of every voting that is why some restrictions have to be followed during the political distriction. In Germany these conditions are set down into the Federal Electoral Law ยง3 Art. 1. It determines that the creation of constituencies should be done in this way that the number of constituencies within the federal state should be agree with the part of the population \cite{bund}. This means that every constituency should hold a similar number of voters compared to other constituencies. The number of inhabitants of Germany is used as stipulation to satisfied that condition. During the distraction the boundaries of townships, districts and cities should be preserved as much as possible. Considering different uses cases of political distriction three essential characteristics of districts can be defined:
\begin{enumerate}
	\item The created constituencies should have nearly equal populations in order to respect the principle.
	\item The  created constituencies should be coherent.
	\item  The created constituencies should be geographically compact.
\end{enumerate}

Before an election can be carried out the existing constituencies have do be proofed and adapted if it is necessary because local alteration of the population can be recognized over the time. A commission will do this in front of every voting. If an adaptation of the constituencies is necessary an area segmentation approach needs to be applied. The figure below shows the political distraction in 2013 for the parliamentary elections in Germany.


\begin{figurevarSize}{Politicial Districtings in Germany for parliamentary elections in 2013 \cite{bund}}{images/wahlkreise.jpg}{0.7}\end{figurevarSize}


\subsubsection{Sales Districting and optimization}
One of the most common tasks of marketing organization is the arrangement of areas of operation for the branch offices as well as the organisation of the costumer care within these areas of operation. In every company which deals with branch offices this planning task is important and needs to be done periodically. During the planning process several territories are created which contain costumers. For each territory one salesman is responsive for. Historically the sales districting was done with the help of a paper map, some pins, strings and adhesive labels. Already today some companies are doing it this way. The fixedness of that approach is obvious, additionally it is really fault-prone during a new alignment or a rearrangement of the sales distriction.

\begin{figurevarSize}{Historical sales distriction with map, pins and strings \cite{tappert}}{images/map_historic.jpg}{0.7}\end{figurevarSize} 

More and more companies recognize the advantages of software tools which offer funcionality for sales distraction. During the alignment and optimization several criteria may be kept in mind. It is necessary to know how much territories should be created (dependent on the number of salesman) per example. Furthermore the territories need to be compact and coherent to minimize the travelling time for each salesman.  In addition to cost and time saving by having well formed sale territories a lot of more advantages are given by that approach. Per example an unequal work load or territory potential compared from one salesman to another can lead to low morale, poor performance, a high turnover rate, and an inability to assess the productivity of individual territories or districts \cite{hessstuart}. Additionally some costumers may be unattended by too much workload of a salesman or by no definite allocation to one territory. With the help of visualising existing costumer data an incorrect assignment of costumers to a salesman can be demonstrated. These ones may be owing to a historically growth because every salesman amplifies its stock of costumers. By a reallocation of that costumer data the territories can be redefined so that the work load and the travelling time can be optimized.

\begin{figurevarSize}{Redefinition of affiliation of costumers. a) Faulty allocation of costumers. b) Redefined assignment. \cite{zimtec}}{images/salesdistriction1.jpg}{0.9}\end{figurevarSize} 

Additionally to work load, travelling time etc. the potential value of every territory should be balanced. As it is shown in the following figure this is not the case in Figure a). Consequently an area optimization needs to be done to balance the potential value of both areas.

\begin{figurevarSize}{Unbalanced potential value within different territories a) Existing situation of unbalanced territories. b) Territories after optimization. \cite{zimtec}}{images/salesdistriction2.jpg}{0.9}\end{figurevarSize} 

\subsubsection{Whitespot analysis}
The most of the companies aspire for expansion to raise their profit. For this step it is necessary to know where unexploited potentials of markets exist. Therefore the so called white spots of a map need to be determined - this process is called whitespotanalysis. Every white spot contain costumers which may not be bonded to a competition company so that they receive the potential for more profit of a company. The following figure shows an example of the natural gas network in Germany. The white spots are communities which are not connected to the integrated network. Consequently these areas are interesting for other thermal care systems like oil or coal. 

\begin{figurevarSize}{The map shows the natural gas network in Germany. The white spots are communities that are not connected to the integrated network. \cite{tappert}}{images/whitespot_usecase.jpg}{0.75}\end{figurevarSize} 
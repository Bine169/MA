\section{Comparison of implemented approaches}\label{comparisonapproaches}
In order to compare the results of all introduced algorithms they have been implemented. The results and a summary of each approach is available in section \ref{Implementation} ''\hyperref[Implementation]{Implementation of area segmentation approaches}''. These results are now used to define parameters that measure the quality of the implemented algorithms. Therefore different terms are defined.
One term is called $\delta$. This one defines the average difference to the balance value that should be reached. The balance value, denoted as $B$ is calculated by the quotient of the sum of activity measures of all basic areas and the number of territories created during the calculation. In the case study the balance value is an activity measure of 34662. Consequently each territory needs to own such a number of basic areas so that this value is approximately reached. For defining $\delta$ the differences of the activity measures of the territories to the balance value are calculated. Afterwards the differences are added and divided by the number of territories. It can be formulated as

\[ \mathit{\delta  = \frac{\sum\nolimits  _{T_{i} \in V} w(T_{i})-B}{N}}\]

Additionally to $\delta$ a second parameter $ \theta $ will be defined. $\theta$ describes the difference to the desirabled number of territories and consequently evaluates the quality of the contiguity of the algorithms. Therefore for each territory the number of sub territories will be calculated. To achieve a satisfying coherency the number of sub territories needs to be one. But the algorithms show that this is not always the case. Consequently each territory can be evaluate concerning the sub territories. These territories can be summed up to determine a conclusion about the coherency. Caused by the fact that the desirabled number of territories needs to be the number of how much territories need to be created (in the case study these are 10 territories), the number of territories can be divided by the number of calculated sub territories to get a quality measure of compactness. Let $n_{T}$ denotes the number of sub territories of each territory then it can be formulated as

\[ \mathit{\theta  = \frac{N}{\sum\nolimits  _{T_{i} \in V} n_{T}}}\]

Besides these two parameters additionally another notion, denoted as $\gamma$, will be used showing the average compactness measure for each algorithm. Therefore the compactness measure of each territory will be summed up. Afterwards they are divided by the number of territories that should be created. Let $c_{T}$ denoting the compactness of the territories. Thus the calculation of $\gamma$ can be formulated as

\[ \mathit{\gamma  = \frac{\sum\nolimits  _{T_{i} \in V} c_{T}}{N}}\]

All three parameters will be used for evaluating and comparing the algorithms. For 
differentiating the distinct sources of basic areas that were used, the parameters getting a footnote,
 \begin{itemize}
 	\item 5 denotes that the calculation was done to zip-code5 areas.
 	\item 8  denotes that the calculation was done to zip-code8 areas.
 \end{itemize}
 
 The results of all algorithms are shown in Table 13. Besides the determined parameters additionally the visualization of the results as well as the calculation time will be shown. \newline
 \\ After summarizing the results the comparison can be done in more detail. Therefore a ranking of the qualities of the different parameters will be done. In section \ref{notions} ''\hyperref[notions]{Notions and criteria}'' the conditions of a satisfying area segmentation process have been defined. It was determined that balance, contiguity and compactness are the three main conditions which should be considered. Consequently the quality of the algorithms can be defined by ranking the results concerning balance, contiguity and compactness. Therefore points between 1 and 10 will be given dependent on the quality of the results. The higher the value, the higher the quality. Afterwards the earned points will be summed up, thus the sums of all algorithms can be compared easily. Defining the ranges for every point the biggest achieved value of a criteria will be taken and divided by 10. Consequently 10 intervals are created. Dependent on the interval a value lies in, the points are given to it. The result of the ranking is shown in Table 14. The calculation time will be not ranked for two reasons. First the main focus is set to the three mentioned parameters. Consequently these are the most important and needs to be chosen to evaluate the algorithms. The second reason is caused by the limited comparability of the performance times. Each algorithm owns a different complexity. This one is influenced by the number of accesses to the databases for example. The database accesses are necessary to get data for solving the area segmentation problem and to perform spatial calculations. Taking AllocMinDistLocalSearch it can be recognized that neighbouring relationships are used to rearrange basic areas to get balanced territories. Consequently a lot of more accesses to the database are necessary to use this relationships. It is obviously that an algorithm without using such relationships is faster during the calculations but may yield to worse results. 
 


\begin{landscape}

\begin{longtable}[H]
	{|p{1cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|>{\RaggedLeft}p{2.3cm}|}
		\hline
		& \centering{AllocCrit} & \centering{AllocMinDist} & \centering{Eat-up} & \centering{SmallestCrit GetsNearest} & \centering{SmallestCrit GetsTrue\-Nearest} & \centering{Outside SmallestCrit\-GetsNearest} & \centering{EatUp MinDist} & \centering{AllocMin DistLocalSearch} \tabularnewline
		\hline
		zip-code5&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/AllocCritplz5.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/AllocDistPlz5.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/eatupplz5.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/smallestcritgetsnearestplz8.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/smallestcritgetstruenearestplz5.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/Outsidesmallestcritgetsnearestplz5.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/eatupDistplz5.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/AllocMinDistLocalSearchplz5.jpg}}
		\tabularnewline
		\hline
		zip-code8&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/AllocCritplz8.jpg}}
		&
		\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/AllocDistplz8.jpg}}
		& \vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/eatupplz8.jpg}}
		&\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/smallestcritgetsnearestplz8.jpg}}
		& \vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/smallestcritgetstruenearestplz8.jpg}}
		&\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/Outsidesmallestcritgetsnearestplz8.jpg}}
		&\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/eatupDistplz8.jpg}}
		&\vspace{1mm}
		\centering{\includegraphics[width=0.18\textwidth]{images/AllocMinDistLocalSearchplz8.jpg}}
		\tabularnewline
		\hline
		$\delta_{5}$ & 2984.8 & 11338.8 & 6932.4 & 3506.4 & 1417.8 & 10.828 & 10145.8 & 1282.4
		\tabularnewline
		\hline
		$\delta_{8}$ & 93.2 & 14945.8 & 927.8 & 125 & 142.8 & 8902 & 1036.8 & 1356.2
		\tabularnewline
		\hline
		$\theta_{5}$ & 0.3448 & 1 & 0.4762 & 0.7143 & 0.7692 & 0.8333& 0.8333 & 0.9091
		\tabularnewline
		\hline
		$\theta_{8}$ & 0.0379 & 0.9091 & 0.5 & 0.2439 & 0.2222& 0.4& 0.5556 & 0.2381
		\tabularnewline
		\hline
		$\gamma_{5}$ & 0.13559 & 0.12793 & 0.12794 & 0.25064 & 0.21807 & 0.24808 & 0.17599 & 0.22664
		\tabularnewline
		\hline
		$\gamma_{8}$ & 0.01535 & 0.15426 & 0.15426 & 0.14309 & 0.08398 & 0.21587& 0.22798 & 0.10337
		\tabularnewline
		\hline
		$t_{5}$ & 0.421 s & 2.707 s & 0.501 s &  0.858 s & 0.779 s & 0.668 s & 1.023 s & 3.525 s
		\tabularnewline
		\hline
		$t_{8}$ & 0.506 s & 3.979 s & 0.583 s & 3.401 s & 3.107 s & 2.669 s & 3.965 s  & 129.920 s
		\tabularnewline
		\hline
		\caption{Overview of results of area segmentation using different heuristics.}\\
\end{longtable}
\newpage


\begin{longtable}[H]	{|p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|>{\RaggedLeft}p{2.1cm}|}
	\hline
	& \centering{AllocCrit} & \centering{AllocMinDist} & \centering{Eat-up} & \centering{SmallestCrit GetsNearest} & \centering{SmallestCrit GetsTrue\-Nearest} & \centering{Outside SmallestCrit\-GetsNearest} & \centering{EatUp MinDist} & \centering{AllocMin DistLocalSearch} \tabularnewline
	\hline
	$\delta_{5}$ & 8 & 1 & 4 & 7 & 9 & 1 & 2 & 9
	\tabularnewline
	\hline
	$\delta_{8}$ & 10 & 1 & 10 & 10 & 10 & 5 & 10 & 10
	\tabularnewline
	\hline
	$\theta_{5}$ & 4 & 10 & 5& 8 & 8 & 9 & 9 & 10
	\tabularnewline
	\hline
	$\theta_{8}$ & 1 & 10 & 6& 3 & 3 & 5 & 6 & 3
	\tabularnewline
	\hline
	$\gamma_{5}$ & 2 & 2 & 2& 3 & 3 & 3 & 2 & 3
	\tabularnewline
	\hline
	$\gamma_{8}$ & 1 & 2 & 2& 2 & 1 & 3 & 3 & 2
	\tabularnewline
	\hline
	\textbf{sum} & \textbf{26} & \textbf{26} & \textbf{29} & \textbf{33} & \textbf{34} & \textbf{26} & \textbf{32} & \textbf{37}
	\tabularnewline
	\hline
	\caption{Ranking of different heuristics for area segmentation}\\
\end{longtable}
\end{landscape}

The ranking of the algorithms shows abilities and weaknesses of the approaches. By calculating the sum of the given points it can be determined that AllocMinDistLocalSearch is the most promising algorithm of the amount of implemented approaches. Although the algorithm has some weaknesses yet it associates the best results concerning balance, contiguity and compactness. In the following all algorithm will be compared in more detail to explain the solutions. The smallest sum of points owned AllocCrit, AllocMinDist and OutsideSmallestCritGetsNearest. The problem by using AllocCrit is the missing consideration of coherence and compact territories. Just the activity measures are kept in mind consequently a patchwork rug of territories is created, thus the algorithm is not usable. The same problem can be determined using AllocMinDist but contrary to AllocCrit just contiguity and compactness are kept in mind. Hence the balance is completely ignored so that the resulting territories are mostly coherent but not well balanced. Thus improvement or combinations of different heuristics are necessary to make this approach usable. \\OutsideSmallestCritGetsNearest was used as an improvement of SmallestCritGetsNearest but owns a lot of weaknesses. Dependent on the used threshold value defining the basic areas which are allocated first by considering their distances to the territories centre the result of the algorithm will be more or less balanced. If the threshold is very huge no basic areas will be allocated first so that the algorithm is working equally to SmallestCritGetsNearest. If a small threshold value is taken a lot of basic areas will be assigned in first step. This process causes a great difference concerning the sum of activity measure in each territory. Consequently the tried improvement failed. Thus SmallestCritGetsNearest is more applicable than OutsideSmallestCritGetsNearest. That result can be confirmed showing to the ranking. A little bit more successful than the three mentioned algorithm is the Eat-up approach. Nevertheless that algorithm owns some weaknesses, too. The greatest problem is that it will not be satisfied that even enough territories will be created. By aborting the allocation of basic areas to one territory using a threshold value, for each territories too many basic areas are assigned. Consequently it may be happen that no basic areas can be assigned to the lasts territory centres because all ones were already allocated (see case study using zip-code5 areas).Thus the algorithm can be not used within area segmentation processes using fixed centres. The same problem occurs during the application of EatupMinDist. Within that approach an improvement were implemented to get more coherent territories compared to the ones which were achieved using Eat-up. This target is now satisfied. Nevertheless the creation of the predefined number of territories is not given again. Consequently like Eat-up this algorithm is not usable using fixed centres, too. The results where much better using zip-code8 areas but the algorithm should be more robust in order to fit real world use cases for Geomarketing. But for some data no promising result will be achieved, hence the algorithm is classified to be not applicable. Better results are achieved by using SmallestCritGetsNearest and SmallestCritGetsTrueNearest. Both algorithms almost got the same ranking. There exists just some small differences concerning the given points of balance and compactness. Although both algorithm got similar points within the ranking SmallestCritGetsTrueNearest own a lot of more problems than SmallestCritGetsNearest. During the application of SmallestCritGetsTrueNearest the main problem occurs during the allocation of the basic area that is the closest one. Remembering the algorithm the territory centre with smallest sum of activity measure was determined. Afterwards the nearest basic area which is not allocated yet is chosen. Before allocation it is checked whether another territory centre is located nearer to that basic area. If this is the case the territory centre with smallest activity measure gets the nearest basic area which is allocated in another territory. This change affects an invinite loop because always sane basic area are redistributed circular. A workaround was needed to solve that problem. But the chosen algorithm influences the resolution so much that it is not usable for Geomarketing analyses. Until yet no solution is found which is working dependably. Consequently the SmallestCritGetsTrueNearest approach is not recommended for area segmentation processes yet. If a dependable solution for the infinite loops will be found the algorithm become maybe more promising. Especially the consideration of the distances of each basic areas in more detail is a great advantage to the processes being used in SmallestCritGetsNearest. Because the main problem of SmallestCritGetsNearest is that some basic areas are far away from their territory because just there areas were not allocated yet. Consequently a useful improvement is necessary to make the algorithm applicable for Geomarketing strategies. \\The ranking shows that the most promising algorithm is AllocMinDistLocalSearch. Compared to all other implemented algorithm it delivers the best results. The greatest advantages compared to the others are the two steps which are used in AllocMinDistLocalSearch. With the help of these steps it is tried to find a satisfying solution of balanced and compact territories. Other algorithm like AllocCrit and AllocMinDist considered just one of the parameters whereas AllocMinDistLocalSearch consider both. Nevertheless it is recognizable that there exist some weaknesses concerning compactness and contiguity yet. Consequently improvements are necessary to make it fully usable for the desired analyses. 

\subsection{Requirements from the field of Geomarketing}
Within the chapters before several times requirements from the field of Geomarketing were mentioned. Consequently these will be considered in the following with the regard to the most promising algorithm. The approach with best results is AllocMinDistLocalSearch. \\
The aim during the application of area segmentation process is to define territories which contain a balanced value of an activity measure like household numbers, purchasing power or constituents. Consequently one requirement is the balance of the given activity measure. AllocMinDistLocalSearch uses the local search approach to achieve a balanced result. Within the case study the average difference to the desired activity measure value of each territory was 1282.4 in case of zip-code5 areas and 1356.2 in case of zip-code8 areas. These results show that the territories are well balanced. It is important to check whether such well balanced results will be achieved also during the calculation of other examples to get a convincing evaluation. But at the moment the results satisfying the balance constraint.\\
The second requirement from the field of Geomarketing is contiguity. Considering sales distriction for instance, it is obvious that each sales man needs to have a coherent territory for which he is responsible for. In the most of the cases completely coherent areas are required, too. The results of AllocMinDistLocalSearch shows that satisfying this constraint is not given all the time yet. Concerning the calculation using zip-code5 areas the created territories are not contiguous. The same result is identifiable in the case of using zip-code8 areas. This is caused by the missing consideration of coherence during the local search. Consequently an enhancement of the existing algorithm is necessary which includes also the check of contiguity. This one needs to be implemented to get an applicable algorithm for Geomarketing strategies. \\
Third, compactness is another requirement. Taking again the example of sales distriction compact territories need to be created to minimize travelling times and thus work load. A lot of other approaches also require compact territories consequently it will be determined as one necessary constraint. Concerning the results of AllocMinDistLocalSearch the average compactness is better than the one other algorithms had achieved. Nevertheless the values are just 0.22664 (zip-code5) and 0.10337 (zip-code8). For evaluating the compactness the measure of Cox is used. This one determines that a value between 0 and 1 can be achieved. The nearer the calculated compactness value to 1, the better the compactness is. Both values are nearer to 0 than to 1. Consequently the areas own no good compactness. This fact has two reasons. One problem is the incoherence of some territories because this one takes a huge influence to the compactness, too. Another problem is the shape of the investigation areas. Considering the shape and the containing basic areas it will be not possible to create 10 round territories consequently no compactness measure of 1 can be reached. Nevertheless the compactness values are not satisfying at the moment. Consequently an approach needs to be implemented so that the compactness will be considered much more. \\
Another not yet mentioned requirement for area segmentation process is the location of the territory centre within the territory that belongs to the centre. Some of the implemented algorithms do not provide this requirement, see EatupMinDist for example. Also during the application of AllocMinDistLocalSearch such problem may occur. Consequently a constraint need to be implemented which satisfies that the territory centre is located within the territory.

\subsection{Conclusion}
The comparison of the implemented approaches shows that some of the algorithms are not usable but some of them are. A ranking of different parameters for every use case was done to make the results comparable. Therefore three parameters were defined to summarize the calculation results. One parameter shows the average difference to the balanced activity measure value that needs to be satisfied, the second one considers the contiguity and the third one evaluates the compactness. With the help of these parameters points between 1 to 10 can be given to the algorithms so that a sum of points can be calculated. The algorithm with highest sum will be the most promising approach. The comparison shows that AllocCrit and AllocMinDist are not usable. Additionally the calculations show that Eat-Up and EatupMinDist are not applicable to area segmentation processes using fixed centres, too. OutsideSmallestCritgetsNearest and SmallestCritGetsTrueNearest own too much problems to make them promising for Geomarketing strategies. Just SmallCritGetsNearest and AllocMinDistLocalSearch do have potential to be useful algorithm. The results show that AllocMinDistLocalSearch yields to the best area segmentation solution compared to the other algorithms. Consequently this algorithm will be used for the application to Geomarketing strategies. Before it is fully usable at first some improvements need to be done to fulfil the requirements from the field of Geomarketing completely.
